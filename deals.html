<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>US Deals Hunter ‚Äî Sneakers & Watches</title>
  <style>
    :root{--bg:#0b1020;--panel:#141b33;--muted:#9db0d8;--text:#ecf2ff;--accent:#6ea8fe;--ok:#34c759;--warn:#f6c453}
    *{box-sizing:border-box;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,sans-serif}
    body{margin:0;background:linear-gradient(130deg,#0b1020,#132042);color:var(--text)}
    .wrap{max-width:1100px;margin:0 auto;padding:16px}
    .head{display:flex;justify-content:space-between;gap:12px;flex-wrap:wrap;align-items:center}
    h1{margin:0;font-size:22px}
    .muted{color:var(--muted);font-size:13px}
    .grid{display:grid;gap:12px}
    .g2{grid-template-columns:1fr 1fr}
    .card{background:rgba(20,27,51,.92);border:1px solid #2f4174;border-radius:14px;padding:12px}
    .chips{display:flex;gap:8px;flex-wrap:wrap}
    .chip{background:#19274c;border:1px solid #36518d;border-radius:999px;padding:6px 10px;font-size:12px}
    input,select,button{background:#1a2444;color:var(--text);border:1px solid #3c5694;border-radius:10px;padding:8px}
    button{cursor:pointer}
    .row{display:flex;gap:8px;flex-wrap:wrap}
    .offer{display:grid;grid-template-columns:2fr 1fr auto auto;gap:8px;align-items:center;padding:8px;border:1px solid #2e416f;border-radius:10px;margin-bottom:8px}
    .rank{font-size:13px;padding:8px;border:1px solid #2f4174;border-radius:10px;margin-bottom:8px}
    a{color:#a9c7ff;text-decoration:none}
    table{width:100%;border-collapse:collapse;font-size:13px}
    th,td{padding:8px;border-bottom:1px solid #2a3a63;text-align:left}
    .good{color:#9ef2b1}.warn{color:#ffe2a6}
    @media (max-width:900px){.g2{grid-template-columns:1fr}.offer{grid-template-columns:1fr}}
  </style>
</head>
<body>
<div class="wrap">
  <div class="head">
    <div>
      <h1>üî• US Deals Hunter</h1>
      <div class="muted">Find better sneaker + watch deals quickly. Add offers, auto-rank best buys.</div>
    </div>
    <a href="./" class="chip">‚Üê Back to Kanban</a>
  </div>

  <div class="grid g2" style="margin-top:12px">
    <section class="card">
      <h3>1) Pick item</h3>
      <div class="row">
        <select id="category"></select>
        <select id="item"></select>
      </div>
      <div id="itemMeta" class="muted" style="margin-top:8px"></div>
      <div class="chips" id="quickLinks" style="margin-top:10px"></div>
    </section>

    <section class="card">
      <h3>2) Add live offers</h3>
      <div class="offer">
        <input id="offerSeller" placeholder="Seller / site (e.g. StockX, Jomashop)" />
        <input id="offerPrice" type="number" placeholder="Price USD" />
        <input id="offerUrl" placeholder="Listing URL (optional)" />
        <button id="addOffer">Add</button>
      </div>
      <div id="offers"></div>
      <button id="clearOffers">Clear offers</button>
    </section>
  </div>

  <div class="grid g2" style="margin-top:12px">
    <section class="card">
      <h3>3) Best deal ranking</h3>
      <div id="ranking"></div>
    </section>

    <section class="card">
      <h3>Quick watchlist ideas</h3>
      <table>
        <thead><tr><th>Model</th><th>MSRP</th><th>Target deal</th></tr></thead>
        <tbody id="watchlist"></tbody>
      </table>
    </section>
  </div>
</div>

<script>
const data = {
  sneakers: [
    {name:'Nike Dunk Low Panda', msrp:115, target:95, q:'Nike Dunk Low Panda'},
    {name:'Jordan 1 Low', msrp:125, target:105, q:'Air Jordan 1 Low'},
    {name:'New Balance 550', msrp:120, target:100, q:'New Balance 550'},
    {name:'Adidas Samba', msrp:100, target:85, q:'Adidas Samba'}
  ],
  watches: [
    {name:'Tissot PRX Powermatic 80', msrp:725, target:575, q:'Tissot PRX Powermatic 80'},
    {name:'Seiko 5 Sports GMT', msrp:475, target:360, q:'Seiko 5 Sports GMT'},
    {name:'Hamilton Khaki Field Auto', msrp:745, target:620, q:'Hamilton Khaki Field Auto'},
    {name:'Citizen Tsuyosa', msrp:450, target:325, q:'Citizen Tsuyosa'}
  ]
};

const links = {
  sneakers: [
    ['Google Shopping', q => `https://www.google.com/search?tbm=shop&q=${encodeURIComponent(q+' USA')}`],
    ['StockX', q => `https://stockx.com/search?s=${encodeURIComponent(q)}`],
    ['GOAT', q => `https://www.goat.com/search?query=${encodeURIComponent(q)}`],
    ['eBay', q => `https://www.ebay.com/sch/i.html?_nkw=${encodeURIComponent(q)}`],
    ['Amazon', q => `https://www.amazon.com/s?k=${encodeURIComponent(q)}`]
  ],
  watches: [
    ['Google Shopping', q => `https://www.google.com/search?tbm=shop&q=${encodeURIComponent(q+' watch USA')}`],
    ['Jomashop', q => `https://www.jomashop.com/search?q=${encodeURIComponent(q)}`],
    ['Chrono24', q => `https://www.chrono24.com/search/index.htm?query=${encodeURIComponent(q)}`],
    ['WatchMaxx', q => `https://www.watchmaxx.com/search?query=${encodeURIComponent(q)}`],
    ['eBay', q => `https://www.ebay.com/sch/i.html?_nkw=${encodeURIComponent(q+' watch')}`]
  ]
};

let offers = [];

const categoryEl = document.getElementById('category');
const itemEl = document.getElementById('item');
const itemMeta = document.getElementById('itemMeta');
const quickLinks = document.getElementById('quickLinks');
const offersEl = document.getElementById('offers');
const rankingEl = document.getElementById('ranking');
const watchlistEl = document.getElementById('watchlist');

categoryEl.innerHTML = '<option value="sneakers">Sneakers</option><option value="watches">Watches</option>';

function selectedItem(){
  const list = data[categoryEl.value];
  return list[itemEl.selectedIndex] || list[0];
}

function renderItems(){
  const list = data[categoryEl.value];
  itemEl.innerHTML = list.map(i => `<option>${i.name}</option>`).join('');
  renderContext();
}

function renderContext(){
  const it = selectedItem();
  itemMeta.innerHTML = `MSRP: <b>$${it.msrp}</b> ‚Ä¢ Target deal: <b class="good">$${it.target}</b>`;
  quickLinks.innerHTML = links[categoryEl.value]
    .map(([name,fn]) => `<a class="chip" target="_blank" href="${fn(it.q)}">${name}</a>`).join('');
  renderRanking();
  renderWatchlist();
}

function renderOffers(){
  offersEl.innerHTML = offers.map((o,idx)=>`<div class="offer"><div><b>${o.seller}</b><div class="muted">${o.url?`<a target="_blank" href="${o.url}">listing</a>`:'no link'}</div></div><div>$${o.price}</div><div class="muted">${o.ts}</div><button onclick="removeOffer(${idx})">Remove</button></div>`).join('') || '<div class="muted">No offers yet. Add a few to compare.</div>';
}

function scoreOffer(offer,it){
  const savings = it.msrp - offer.price;
  const savingsPct = (savings / it.msrp) * 100;
  const targetGap = it.target - offer.price; // >0 means better than target
  return { savings, savingsPct, targetGap };
}

function renderRanking(){
  const it = selectedItem();
  if(!offers.length){ rankingEl.innerHTML = '<div class="muted">Add offers to rank best deal.</div>'; return; }

  const ranked = offers.map(o => ({...o, ...scoreOffer(o,it)}))
    .sort((a,b)=> b.savingsPct - a.savingsPct);

  rankingEl.innerHTML = ranked.map((r,i)=>{
    const tone = r.price <= it.target ? 'good' : 'warn';
    return `<div class="rank"><b>#${i+1} ${r.seller}</b> ‚Äî <b>$${r.price}</b> ‚Ä¢ <span class="${tone}">${r.savingsPct.toFixed(1)}% below MSRP</span> ‚Ä¢ ${r.price<=it.target?'beats':'above'} target by $${Math.abs(r.targetGap).toFixed(0)} ${r.url?`‚Ä¢ <a target="_blank" href="${r.url}">open</a>`:''}</div>`;
  }).join('');
}

function renderWatchlist(){
  const list = data[categoryEl.value];
  watchlistEl.innerHTML = list.map(i=>`<tr><td>${i.name}</td><td>$${i.msrp}</td><td class="good">$${i.target}</td></tr>`).join('');
}

window.removeOffer = (idx)=>{ offers.splice(idx,1); renderOffers(); renderRanking(); };

document.getElementById('addOffer').onclick = ()=>{
  const seller = document.getElementById('offerSeller').value.trim();
  const price = Number(document.getElementById('offerPrice').value);
  const url = document.getElementById('offerUrl').value.trim();
  if(!seller || !price) return alert('Add seller and price.');
  offers.unshift({seller, price, url, ts:new Date().toLocaleString()});
  document.getElementById('offerSeller').value='';
  document.getElementById('offerPrice').value='';
  document.getElementById('offerUrl').value='';
  renderOffers();
  renderRanking();
};

document.getElementById('clearOffers').onclick = ()=>{ offers=[]; renderOffers(); renderRanking(); };

categoryEl.onchange = renderItems;
itemEl.onchange = renderContext;

renderItems();
renderOffers();
</script>
</body>
</html>
